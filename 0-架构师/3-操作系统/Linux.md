bilibili:https://www.bilibili.com/video/BV1n84y1i7td

### 第一章

#### 02-Linux初识

**1.Linux的诞生**

Linux由林纳斯 托瓦兹在1991年创立并发展至今成为服务器操作系统领域的核心系统。

**2.什么是Linux系统的内核**

内核提供了Linux系统的主要功能，如硬件调度管理的能力。

Linux内核时免费开源的，任何人都可以查看内核的源代码，甚至是贡献代码。

**3.什么是Linux系统发行版本**

内核无法被用户直接使用，需要配合应用程序才能被用户使用。

在内核之上，封装系统应用程序，组合在一起就称之为Linux发行版本。

#### 03-虚拟机介绍

**1.什么是虚拟机**

通过虚拟化技术，在电脑内，虚拟出计算机硬件，并给虚拟的硬件安装操作系统，即可得到一台虚拟的电脑，称之为虚拟机。

**2.为什么要使用虚拟机**

学习Linux系统，需要由Linux系统环境

我们不能给自己电脑重装系统为Linux，所以通过虚拟机的形式，得到可以用的Linux系统环境，供后续学习使用。

#### 07-远程连接Linux系统

远程连接工具FinalShell下载：[FinalShell](https://www.hostbuf.com/c/131.html)

**1.什么是图形化操作，什么是命令行操作**

图形化操作是指使用操作系统附带的图形化页面，以图形化的窗口形式获得操作反馈，从而对操作系统进行操作、使用。

命令行操作是指使用各种命令，以文字字符的形式获得操作反馈，从而对操作系统进行操作、使用。

**2.为什么Linux操作系统要选择命令行形式呢**

Linux操作系统的图形化页面不好用且不稳定

使用命令行的形式操作更加高效且稳定资源占用低

企业和开发者都选择命令行，所以我们也学习命令行

**3.为什么使用FinalShell连接Linux去使用**

操作Linux系统中间间跨越虚拟机会导致交互不太方便

我们只需要使用命令行无需使用图形化，所以命令行远程连接使用即可

**4.如何查看Linux的IP地址并远程连接呢**

在Linux操作系统中，桌面空白右键点击：open in terminal

输入ifconfig，即可看到IP地址

在FinalShell配置好IP地址，账号密码后即可连接成功

#### 08-扩展-Win10配置WSL(Ubuntu)环境

**1.为什么要用WSL**

传统方式获取Linux操作系统环境，是安装完整的虚拟机，如VMware

使用WSL，可以以非常轻量化的方式，得到Linux系统环境

**2.什么是WSL**

WSL：windows subsystem for Linux, 是用于Windows系统之上的Linux子系统

可以在Windows系统中获得Linux系统环境，并完全直连计算机硬件，无需通过虚拟机虚拟硬件

**3.WSL部署**

WSL是Windows10自带功能，需要开启，无需下载，程序与功能->启用或关闭Windows功能->适用于Linux的Windows子系统

micorsoft store安装下载Ubuntu即可使用

#### 09-扩展-虚拟机快照

通过快照将当前虚拟机的状态保存下来，在以后可以通过快照恢复虚拟机到保存状态

### 第二章

#### 01-Linux目录结构

**1.Linux操作系统的目录结构**

Linux只有一个顶级目录，称之为：根目录

Windows系统有多个顶级目录，即各个盘符

**2./在Linux系统中表示**

出现在开头的/表示：根目录

出现在后面的/表示：层级关系

**3.目录结构**

| 目录 | 说明                                                         |
| :--- | ------------------------------------------------------------ |
| bin  | 存放二进制可执行文集（ls,cat,mkdir等）                       |
| boot | 存放用于系统引导时使用的各种文件                             |
| dev  | 用于存放设备文件                                             |
| etc  | 存放系统配置文件                                             |
| home | 存放所有用户文件的根目录                                     |
| lib  | 存放跟文件系统中的程序运行所需要的共享库及内模块             |
| mnt  | 系统管理员安装临时文件系统的安装点                           |
| opt  | 额外安装的可选应用程序包所放置的位置                         |
| proc | 虚拟文件系统，存放当前内存的映射                             |
| root | 超级用户目录                                                 |
| sbin | 存放二进制可执行文件，只有root才能访问                       |
| tmp  | 用于存放各种临时文件                                         |
| usr  | 用于存放系统应用程序，比较重要的目录/usr/local本地管理员软件安装目录 |
| var  | 用于存放运行时需要改变数据的文件                             |

#### 02-操作文件目录命令

**Linux命令基础格式**

command [-options] [parameter]

conmmand：命令本身

-options：[可选，非必填]命令的一些选项，可以通过选项控制命令的行为细节

parameter：[可选，非必填]命令的参数，多数用于命令的指向目标等

[]：语法中表示可选的以上

| 命令  | 说明                                   | 参数                 | 参数说明                                                     | 扩展                                                    |
| ----- | -------------------------------------- | -------------------- | ------------------------------------------------------------ | ------------------------------------------------------- |
| ls    | 显示文件和目录列表                     | -l                   | 列出文件的详细信息                                           | ll                                                      |
|       |                                        | -a                   | 列出当前目录所有文件，包含隐藏文件                           |                                                         |
|       |                                        | -h                   | 表示以易于阅读的形式，列出文件大小，如K、M、G                |                                                         |
| mkdir | [make directory]创建目录               | -p                   | 父目录不存在情况下先生成父目录                               |                                                         |
| cd    | [change directory]切换目录             |                      |                                                              | cd /切换到根目录<br />cd 直接切换到用户目录             |
| touch | 生成一个空文件                         |                      |                                                              |                                                         |
| echo  | 生成一个带内容的文件                   | echo 内容 > 1.txt    | 创建文件并将内容写入                                         |                                                         |
|       |                                        | ehco 内容 >>1.txt    | 内容追加                                                     |                                                         |
|       |                                        | ``                   | 被反引号包含的内容作为命令执行                               |                                                         |
| cat   | 显示文本文件内容                       |                      |                                                              |                                                         |
| cp    | 复制文件或目录                         | [-r] 参数1 参数2     | -r 可选，用于复制文件夹使用，表示递归<br />参数1， 路径，表示被复制的文件或文件夹<br />参数2，路径，表示要复制去的地方 |                                                         |
| rm    | 删除文件                               | -f 参数1 参数2...    | 强制删除文件或目录<br />参数表示要删除的文件或文件夹路径     | 支持通配符                                              |
|       |                                        | -r 参数1 参数2...    | 同时删除该目录下的所有文件<br />参数表示要删除的文件或文件夹路径 |                                                         |
| mv    | 移动文件或目录                         | 参数1 参数2          | 参数1，路径，表示被移动的文件或文件夹<br />参数2，路径，表示要移动去的地方 |                                                         |
| which | 查找命令的程序文件路径                 |                      |                                                              | 例如 which cd                                           |
| find  | 在文件系统中查找指定的文件             | -name                | 文件名，支持正则表达式                                       | find 起始路径 -name “被查找文件名”<br />支持使用通配符* |
|       |                                        | -size +\|- n[kMG]    | +、-表示大于和小于<br />n表示大小数字<br />kMG表示大小单位   |                                                         |
| grep  | 在指定的文本文件中查找指定的字符串     | [-n] 关键字 文件路径 | 选项-n，可选，表示在结果中显示匹配的行的行号<br />关键字，必填，表示过滤的关键字，带有空格或其它特殊符号，建议用“”将关键字包围起来<br />文件路径，必填，表示要过滤内容的文件路径，可作业内容输入端口 |                                                         |
| wc    | 统计文件的行数、单词数量等             | [-c] 文件路径        | 统计bytes数量<br />文件路径，被统计的文件，可作为内容输入端口 |                                                         |
|       |                                        | [-m] 文件路径        | 统计字符数量                                                 |                                                         |
|       |                                        | [-l] 文件路径        | 统计行数                                                     |                                                         |
|       |                                        | [-w] 文件路径        | 统计单词数量                                                 |                                                         |
| tree  | 用于以树状图列出目录的内容             |                      |                                                              |                                                         |
| pwd   | [print work directory]显示当前工作目录 |                      |                                                              |                                                         |
| ln    | 建立软链接                             |                      |                                                              |                                                         |
| more  | 分页显示文本文件内容                   |                      |                                                              | 使用空格进行翻页，使用q退出查看                         |
| head  | 显示文件开头内容                       |                      |                                                              |                                                         |
| tail  | 显示文件结尾内容                       | -f 路径              | 持续跟踪输出                                                 |                                                         |
|       |                                        | -num 路径            | 查看尾部多少行，默认10行                                     |                                                         |

**相对路径和绝对路径**

绝对路径：以根目录为起点，描述路径的一种写法，路径描述以/开头

相对路径：以当前目录为起点，描述路径的一种写法，路径描述无需以/开头

**特殊路径符**

| 符号 | 含义           | 举例                                                         |
| ---- | -------------- | ------------------------------------------------------------ |
| .    | 表示当前目录   | 比如 cd ./Desktop 表示切换到当前目录下的Desktop目录内        |
| ..   | 表示上一级目录 | 比如 cd .. 即可切换到上一级目录，cd ../.. 切换到上二级目录   |
| ~    | 表示HOME目录   | 比如 cd ~即可切换到HOME目录，cd ~/Desktop,切换到HOME内的Desktop目录 |

**rm-通配符**

| 符号   | 含义                         |
| ------ | ---------------------------- |
| *      | 即匹配任意内容               |
| test*  | 表示匹配任何以test开头的内容 |
| *test* | 表示匹配任何包含test的内容   |

**管道符**

含义：将管道符左边命令的结果，作为右边命令的输入

**重定项符**

| 符号 | 含义                                             |
| ---- | ------------------------------------------------ |
| >    | 将左侧命令的结果，覆盖写入到符号右侧指定的文件中 |
| >>   | 将左侧命令的结果，追加写入到符号右侧指定的文件中 |



#### 03-系统管理命令

| 命令     | 说明                                         |
| -------- | -------------------------------------------- |
| stat     | 显示指定文件的相关信息，比ls命令显示内容更多 |
| who      | 显示在线登录用户                             |
| hostname | 显示主机名称                                 |
| uname    | 显示系统信息                                 |
| top      | 显示当前系统中耗费资源最多的进程             |
| ps       | 显示瞬间的进程状态                           |
| du       | 显示指定的文件(目录)已使用的磁盘空间的总量   |
| df       | 显示文件系统磁盘空间的使用情况               |
| free     | 显示当前内存和交换空间的使用情况             |
| ifconfig | 显示网络接口信息                             |
| ping     | 测试网络的连通性                             |
| netstat  | 显示网络状态信息                             |
| clear    | 清屏                                         |
| kill     | 杀死一个进程                                 |

#### 04-开关机命令

| 命令     | 参数       | 参数说明                                                     |
| -------- | ---------- | ------------------------------------------------------------ |
| shutdown | -t seconds | 设定在几秒中之后进行关机程序                                 |
|          | -k         | 并不会真的关机，只是将警告讯息传送给所有使用者               |
|          | -r         | 关机后重新开机(重启)                                         |
|          | -h         | 关机后停机                                                   |
|          | -n         | 不采用正常程序来关机，用强迫的方式杀掉所有执行中的程序后自行关机 |
|          | -c         | 取消目前已经进行中的关机动作                                 |
| reboot   |            | 重启                                                         |
| shutdown | -r now     | 重启                                                         |
| shutdown | -h now     | 关机                                                         |

#### 05-压缩命令

| 命令  | 参数                                        | 参数说明                                                     |
| ----- | ------------------------------------------- | ------------------------------------------------------------ |
| tar   | tar [-cxzjvf] 压缩打包文档的名称 欲打包目录 |                                                              |
|       | -c                                          | 建立一个归档文件的参数指令                                   |
|       | -x                                          | 解开一个归档文件的参数指令                                   |
|       | -z                                          | 是否需要用gzip压缩                                           |
|       | -j                                          | 是否需要用bzip压缩                                           |
|       | -v                                          | 压缩的过程中显示文件                                         |
|       | -f                                          | 使用档名，在f之后要立即接档名                                |
|       | -tf                                         | 查看归档文件里面的文件                                       |
| 例子: | tar -zcvf test.tar.gz test\                 | 压缩文件夹, .gz表明用gzip压缩                                |
|       | tar -zxvf test.tar.gz                       | 解压缩文件夹                                                 |
| gzip  | -d                                          | 解压缩文件                                                   |
|       | -l                                          | 对每个压缩文件，显示压缩文件的大小，未压缩文件的大小，压缩比，未压缩文件的名字 |
|       | -v                                          | 对每一个压缩和解压的文件，显示文件名和压缩比                 |
|       | -num                                        | 用指定的数字num调整压缩的速度，-1或-fast标识最快压缩方法(低压缩比)，-9或-best表示最慢压缩方法(高压缩比)。系统缺省值为6 |
| bzip2 |                                             | 说明：压缩文件后缀名为bz2                                    |
|       | -d                                          | 解压缩                                                       |
|       | -z                                          | 压缩参数                                                     |
|       | -num                                        | 用指定的数字num调整压缩的速度，-1或-fast标识最快压缩方法(低压缩比)，-9或-best表示最慢压缩方法(高压缩比)。系统缺省值为6 |

	# Linux-编辑器的使用

#### 06-vim

**介绍**

vi\vim是visual interface的简称，是Linux中最经典的文本编辑器，同图形化界面中的文本编辑器一样，vi是命令行下对文本文件进行编辑的绝佳选择。

vim是vi的加强版本，兼容vi的所有指令，不仅能编辑文本，而且还具有shell程序编辑的功能，可以不同颜色的字体来辨别语法的正确性，极大方便了程序的设计和编辑性

**运行模式**

命令模式：所敲的按键编辑器都理解为命令，以命令驱动执行不同的功能

编辑模式/输入模式/插入模式：等待编辑命令输入，此模式下，可以对文件内容进行自由编辑

底线命令模式：以：开始，通常用于文件的保存、退出

<img src="F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250426212142234.png" alt="image-20250426212142234" style="zoom:50%;" />

**命令模式快捷键**

| 模式     | 命令           | 描述                              |
| -------- | -------------- | --------------------------------- |
| 命令模式 | i              | 在当前光标位置进入输入模式        |
| 命令模式 | a              | 在当前光标位置之后进入输入模式    |
| 命令模式 | I              | 在当前行的开头，进入输入模式      |
| 命令模式 | A              | 在当前行的结尾，进入输入模式      |
| 命令模式 | o              | 在当前光标下一行，进入输入模式    |
| 命令模式 | O              | 在当前光标上一行进入输入模式      |
| 输入模式 | esc            | 任何情况下输入esc都能回到命令模式 |
| 命令模式 | 键盘上、键盘k  | 向上移动光标                      |
| 命令模式 | 键盘下、键盘j  | 向下移动光标                      |
| 命令模式 | 键盘左、键盘h  | 向左移动光标                      |
| 命令模式 | 键盘右、键盘l  | 向右移动光标                      |
| 命令模式 | 0              | 移动光标到当前行的开头            |
| 命令模式 | $              | 移动光标到当前行的结尾            |
| 命令模式 | pageup(PgUp)   | 向上翻页                          |
| 命令模式 | pagedown(PgDn) | 向下翻页                          |
| 命令模式 | /              | 进行搜索模式                      |
| 命令模式 | n              | 向下继续搜索                      |
| 命令模式 | N              | 向上继续搜索                      |
| 命令模式 | dd             | 删除光标所在行的内容              |
| 命令模式 | ndd            | n是数字，表示删除当前光标向下n行  |
| 命令模式 | yy             | 复制当前行                        |
| 命令模式 | nyy            | n是数字，复制当前行和下面的n行    |
| 命令模式 | p              | 粘贴复制的内容                    |
| 命令模式 | u              | 撤销修改                          |
| 命令模式 | ctrl+r         | 反向撤销修改                      |
| 命令模式 | gg             | 跳到首行                          |
| 命令模式 | G              | 跳到行尾                          |
| 命令模式 | dG             | 从当前行开始，向下全部删除        |
| 命令模式 | dgg            | 从当前行开始，向上全部删除        |
| 命令模式 | d$             | 从当前光标开始，删除到本行的结尾  |
| 命令模式 | d0             | 从当前光标开始，删除到本行的开头  |

**底线命令模式快捷键**

| 模式         | 命令          | 描述                        |
| ------------ | ------------- | --------------------------- |
| 底线命令模式 | :q            | 直接退出vi                  |
| 底线命令模式 | :wq           | 保存后退出vi,并可以新键文件 |
| 底线命令模式 | :q!           | 强制退出                    |
| 底线命令模式 | :w file       | 将当前内容保存成某个文件    |
| 底线命令模式 | :set nu       | 显示行号                    |
| 底线命令模式 | :set paste    | 设置粘贴模式                |
| 底线命令模式 | :set number   | 在编辑文件显示行号          |
| 底线命令模式 | :set nonumber | 在编辑文件不显示行号        |

#### 07-nano

nano是一个字符终端的文本编辑器，有点像dos下的editor程序。它比vi/vim要简单得多，比较适合Linux初学者使用。某些Linux发行版得默认编辑器就是nano。

**命令**

| ctrl+o | 保存   |
| ------ | ------ |
| ctrl+w | 搜索   |
| ctrl+y | 上一页 |
| ctrl+v | 下一页 |
| ctrl+x | 退出   |

### 第三章

#### 01-用户和组管理

**用户管理模式**

Linux可以支持多用户、多用户组、用户加入多个组

Linux权限管控的单元是用户级别和用户组级别

Linux操作系统是一个多用户操作系统，它允许许多用户同时登录到系统上并使用资源。系统会根据账户来区分每个用户的文件，进程，任务和工作环境，使得每个用户工作都不受干扰。

**使用Root用户**

在实际生产操作中，我们基本上都是使用超级管理账户操作Linux系统，也就是Root用户，Linux系统默认是关闭Root账户的，我们需要为Root用户设置一个初始密码以方便我们使用。

| 命令             | 含义                                                         | 扩展                                                         |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| su [-] [用户名]  | 切换到Root账号<br />-符号可选，表示十分在切换用户后加载环境变量<br />参数：用户名，切换的用户名，省略则表示切换到root | 普通用户切换到其它用户需要输入密码<br />root用户切换到其它用户，无需密码 |
| exit             | 切换用户后，可以通过exit命令退回到上一个用户，也可以使用快捷键ctrl+d |                                                              |
| sudo 其它命令    | 为普通的命令授权，临时以root身份执行                         | 需要为普通为普通用户配置sudo认证                             |
| sudo passwd root | 设置Root账户密码                                             |                                                              |

**为普通用户配置sudo认证**

切换到root用户，执行visudo命令，会自动通过vi编辑器打开: /etc/sudoers

在文件的最后添加：用户名 ALL=(ALL)	NOPASSWD: ALL

​	其中最后的NOPASSWD: ALL表示使用sudo命令，无需输入密码

**用户组管理**

| 命令（需root用户执行）    | 含义                                                         | 扩展                                                         |
| ------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| groupadd 用户组名         | 创建用户组                                                   |                                                              |
| groupdel 用户组名         | 删除用户组                                                   |                                                              |
| useradd [-g -d] 用户名    | 创建用户<br />选项：-g指定用户的组，不指定-g,会创建同名组并自动加入，若组已存在，必须使用-g<br />选项：-d指定用户HOME路径，不指定，HOME目录默认在：/home/用户名 |                                                              |
| userdel [-r] 用户名       | 删除用户<br />选项：-r删除用户的HOME目录，不使用-r，HOME目录保留 |                                                              |
| id [用户名]               | 查看用户所属组<br />参数：用户名，不提供则查看自身           |                                                              |
| usermod -aG 用户组 用户名 | 修改用户所属组<br />将指定用户加入指定用户组                 |                                                              |
| getent passwd             | 可以查看当前系统中有哪些用户                                 | ![image-20250427203517735](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250427203517735.png)<br />信息说明：<br />用户名:密码(x):用户ID:组ID:描述信息:HOME目录:执行终端(默认bash) |
| getent group              | 可以查看当前系统有哪些组                                     | ![image-20250427203843542](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250427203843542.png)<br />信息说明：<br />组名称:组认证:组ID |

**设置允许远程登录Root**

修改配置文件/etc/ssh/sshd_config

PermitRootLogin prohibit-password 修改为 PermitRootLogin  yes

重启服务生效：service ssh restart

**用户账户说明**

| 普通用户             | 普通用户在系统上的任务是进行普通操作                         |
| -------------------- | ------------------------------------------------------------ |
| 超级管理员           | 管理员在系统上的任务是对普通用户和整个系统进行管理。对系统具有绝对的控制权，能够对系统进行一切操作。用root表示，root用户在系统中拥有最高权限，默认下Ubuntu用户的root用户是不能登录的。 |
| 安装时创建的系统用户 | 此用户创建时被添加到admin组中，在Ubuntu中，admin组中的用户默认是可以使用sudo命令来执行只有管理员才能执行的命令的。如果不使用sudo就是一个普通用户 |

**组账户说明**

| 私有组 | 当创建一个用户时没有指定属于哪个组，Linux就会建立一个与用户同名的私有组，此私有组只含有该用户 |
| ------ | ------------------------------------------------------------ |
| 标准组 | 当创建一个用户时可以选定一个标准，如果一个用户同时属于多个组时，登录后所属的组为主组，其他的为附加组 |

**账户系统文件说明**

/etc/passwd

![image-20221225113450832](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20221225113450832.png)

/etc/shadow

![image-20221225113614853](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20221225113614853.png)

/etc/group

![image-20221225113700491](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20221225113700491.png)

/etc/gshadow

![image-20221225113728108](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20221225113728108.png)

#### 02-文件权限管理

**查看文件和目录的权限**

| ls -al | 显示文件或目录的权限信息                                     |
| ------ | ------------------------------------------------------------ |
| ls -l  | 显示信息：文件类型，文件权限，文件的用户，文件的所属组，文件的大小，文件的创建时间，文件的名称 |
| 例如： | -rw-r--r--  1 root root  148 Aug 17  2015 .profile           |
| -      | 普通文件                                                     |
| rw-    | 说明用户有读写权限，没有运行权限                             |
| r--    | 说明用户组只有读权限，没有写和运行权限                       |
| r--    | 说明其它用户只有读权限，没有写和运行权限                     |

**文件类型**

| d    | 表示目录                 |
| ---- | ------------------------ |
| l    | 表示软链接               |
| -    | 表示文件                 |
| c    | 表示串行端口字符设备文件 |
| b    | 表示可供存储的块设备文件 |

**文件权限**

| r    | 只读         |
| ---- | ------------ |
| w    | 可写         |
| x    | 可执行       |
| -    | 表示无此权限 |

**更改操作权限**

| 命令                                        | 含义                                                         | 扩展                                                         |
| ------------------------------------------- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| chmod [-R] 权限 文件或文件夹                | 修改文件、文件夹得权限信息<br />-R: 进行递归式的权限更改，将目录下的所有文件、子目录更新为指定用户组权限<br />注意，只有文件、文件夹得所属用户或root用户可以修改 | 例如： chown lmx:lmx test 将目录test的所有者修改为lmx用户和lmx用户组<br />chmod u=rwx,g=rx,o=x hello.txt, 将文件权限修改为: rwxr-x--x 其中u表示所属用户权限，g表示group组权限，o表示other其它用户权限 |
|                                             |                                                              |                                                              |
|                                             |                                                              |                                                              |
|                                             |                                                              |                                                              |
| chown [-R] [用户] [:] [用户组] 文件或文件夹 | 是change owner的意思，主要作用就是改变文件或者目录所有者，所有者包含用户和用户组<br />注意：普通用户无法修改所属为其它用户或组，此命令只适用于root用户执行<br />选项，-R，同chmod，对文件夹内全部内容应用相同规则<br />选项，用户，修改所属用户<br />选项，用户组，修改所属用户组<br />：用于分隔用户和用户组 | chown root hello.txt，将所属用户修改为root<br />chown :root hello.txt，将所属用户组修改为root<br />chown root:lmx hello.txt, 将所属用户修改为root,用户组修改为lmx |
|                                             |                                                              |                                                              |
|                                             |                                                              |                                                              |
|                                             |                                                              |                                                              |
|                                             |                                                              |                                                              |
|                                             |                                                              |                                                              |

|                                     |
| ----------------------------------- |
| 改变访问权限                        |
| chmod [who] [+\|-\|=] [mode] 文件名 |

**who 表示操作对象可以是以下字母的一个或者组合 **

| u    | 用户user                 |
| ---- | ------------------------ |
| g    | 用户组group              |
| o    | 表示其他用户             |
| a    | 表示所有用户是系统默认的 |

**操作符号**

| +    | 表示添加某个权限                       |
| ---- | -------------------------------------- |
| -    | 表示取消某个权限                       |
| =    | 赋予给定的权限，取消文档以前的所有权限 |

**mode**

表示可执行权限，可以是r、w、x

**数字设定法**

数字设定法中数字表示的含义

- 0 表示没有任何权限
- 1 表示有可执行权限 = x
- 2 表示有可写权限 = w
- 4 表示有可读权限 = r

也可以用数字来表示权限如 chmod 755 file_name

### 第四章

#### 01-各类小技巧快捷键

| 命令               | 作用                         | 扩展                                               |
| ------------------ | ---------------------------- | -------------------------------------------------- |
| ctrl+c             | 强制停止                     |                                                    |
| ctrl+d             | 退出或登出                   |                                                    |
| **历史命令搜索**   |                              |                                                    |
| history            | 历史命令搜索                 |                                                    |
| !命令前缀          | 自动执行前一次匹配前缀得命令 |                                                    |
| ctrl+r             | 输入内容去匹配历史命令       | 回车键可以直接执行<br />键盘左右键，可以得到此命令 |
| **光标移动快捷键** |                              |                                                    |
| ctrl+a             | 跳到命令开头                 |                                                    |
| ctrl+e             | 跳到命令结尾                 |                                                    |
| ctrl+键盘左键      | 向左跳一个单词               |                                                    |
| ctrl+键盘右键      | 向右跳一个单词               |                                                    |
| **清屏**           |                              |                                                    |
| ctrl+l             | 清空终端内容                 |                                                    |
| clear              | 清空终端内容                 |                                                    |

#### 02-软件安装与卸载

**yum命令**

Linux版本：CentOS

yum：RPM包软件管理器，用于自动化安装配置Linux软件，并可以自动解决依赖问题。

语法：yum [-y] [install | remove | search] 软件名称

​	选项：-y, 自动确认，无需手动确认安装或卸载过程

​	install：安装

​	remove：卸载

​	search：搜索

注意：yum命令需要root权限，可以su切换到root,或使用sudo提权。yum命令需要联网

修改数据源：/etc/yum.repos.d/CentOS-Base.repo

备份旧数据：mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup

下载数据源文件：curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo



**apt命令**

Linux版本：Ubuntu

apt：APT(Advanced Packaging Tool)是Debian/Ubuntu类Linux系统中得软件包管理程序，使用它可以找到想要得软件包，而且安装、卸载、更新都很简便；也可以用来对Ubuntu进行升级；APT得源文件为/etc/apt/目录下的sources.list文件。

语法：apt [-y] [install | remove | search] 软件名称

​	选项：-y, 自动确认，无需手动确认安装或卸载过程

​	install：安装

​	remove：卸载

​	search：搜索

**修改数据源**

由于国内的网络环境问题，我们需要将Ubuntu的数据源修改为国内数据源，操作步骤如下：

**查看系统版本**

lsb_release -a

结果输出为

No LSB modules are available.
Distributor ID:	Ubuntu
Description:	Ubuntu 16.04.7 LTS
Release:	16.04
Codename:	xenial

注意：Codename为xenial，该名称为我们Ubuntu系统的名称，修改数据源需要用到该名称

**编辑数据源**

vi /etc/apt/sources.list

删除全部内容并修改为

deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ xenial-backports main restricted universe multiverse

**更新数据源**

apt-get update

**常用APT命令**

| apt-get install packagename        | 安装软件包                 |
| ---------------------------------- | -------------------------- |
| apt-get remove packagename         | 删除软件包                 |
| apt-get autoremove nano            | 删除软件包及其依赖         |
| apt-get update                     | 更新软件包列表             |
| apt-get upgrade                    | 升级有可用更新的系统(慎用) |
| apt-cache search package           | 搜索                       |
| apt-cache show package             | 获取包信息                 |
| apt-get remove package --purge     | 删除包及配置文件           |
| apt-cache rdepends package         | 查看被哪些包依赖           |
| apt-get build-dep package          | 安装相关的编译环境         |
| apt-get source package             | 下载源代码                 |
| apt-get clean && apt-get autoclean | 清理无用的包               |
| apt-get check                      | 检查是否有损坏的依赖       |

#### 03-systemctl控制软件启动关闭

**systemctl命令**

可以控制软件的启动、关闭、开机自启动

​	系统内置服务可别systemctl控制

​	第三方软件，如果自动注册了可以被systemctl控制

​	第三方软件，如果没有自动注册，可以手动注册

语法：systemctl start | stop | status | enable | disable 服务名

​	start ：启动

​	stop ：关闭

​	status：查看状态

​	enable：开启开机自启

​	disable：关闭开机自启

#### 04-软链接

在系统中创建软链接，可以将文件、文件夹链接到其它位置，类似Windows系统的快捷方式

语法：ln -s 参数1 参数2

​	-s选项，创建软连接

​	参数1：被链接的文件或文件夹

​	参数2：要链接去的目的地

#### 05-日期和时区

**date命令**

通过date命令可以在命令行中查看系统的时间

语法：date [-d] [+格式化字符串]

​	-d 按照给定的字符串显示日期，一般用于日期计算

​		eg：date -d "+1 day" +%Y%m%d  # 显示后一天的日期

​		支持的时间标记为：

| 时间标记 | 含义 |
| -------- | ---- |
| year     | 年   |
| month    | 月   |
| day      | 天   |
| hour     | 小时 |
| minute   | 分钟 |
| second   | 秒   |

​	格式化字符串：通过特定的字符串标记，来控制显示的日期格式

| 符号 | 含义                                   |
| ---- | -------------------------------------- |
| %Y   | 年                                     |
| %y   | 年份后两位数字                         |
| %m   | 月份                                   |
| %d   | 日                                     |
| %H   | 小时                                   |
| %M   | 分钟                                   |
| %S   | 秒                                     |
| %s   | 自1970-01-01 00:00:00 UTC 到现在的秒数 |

**修改Linux时区**

使用root权限，执行如下命令，修改时区为东八区时区

rm -f /etc/localtime

sudo ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

**ntp程序**

通过ntp程序自动联网校准系统时间

安装ntp：yum -y install ntp

启动并设置开机自启：

​	systemctl start ntpd

​	systemctl enable ntpd

手动校准

ntpdate -u ntp.aliyun.com

#### 06-IP地址和主机名

**IP地址**

IP地址是互联网计算机的网络地址，用于再网络中进行定位

IPv4版本：格式—a.b.c.d 其中abcd表示0~255的数字； 查看命令—ifconfig (若无法使用，可以安装yum -y install net-tools)

IPv6版本：不常用、

**特殊IP地址**

127.0.0.1——IP地址用于指代本机

0.0.0.0——特殊IP地址

​	可以用于指代本机

​	可以在端口绑定中用来确定绑定关系

​	在一些IP地址限制中，表示所有IP的意思，如放行规则设置为0.0.0.0，表示允许任意IP访问

**主机名**

主机名就是主机的名称，用于标识一个计算机

查看命令——hostname

修改命令(需root)——hostnamectl set-hostname 主机名

**域名解析**

通过主机名或替代的字符地址去代替数字化的IP地址

域名解析流程：

​	先查看本机的记录(私人地址本)

​	Windows——c:\windows\system32\drivers\etc\hosts

​	Linux——/etc/host

​	再联网去DNS服务器询问

#### 07-配置Linux固定IP地址

**为什么需要固定IP**

当前虚拟机的Linux操作系统，其IP地址是通过DHCP服务获取的

DHCP: 动态获取IP地址，即每次重启设备后都会获取一次，可能导致IP地址频繁变更

**在虚拟机中配置固定IP**

1.在虚拟机中配置IP地址网关和网段

2.在Linux系统中手动修改配置文件，固定IP

​	使用vim编辑/etc/sysconfig/network-scripts/ifcfg-xxx文件

​		BOOTPROTO="static"

​		IPADDR="192.168.137.XXX"

​		NETMASK="255.255.255.0"

​		GATEWAY="192.168.137.1"

​		DNS1="192.168.137.1"

![image-20250510155517237](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250510155517237.png)

​	执行：systemctl restart network 重启网卡 或重启

![image-20250511171352116](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511171352116.png)

**Unbantu配置**

使用vim编辑/etc/network/interface文件

![image-20250510190330006](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250510190330006.png)

执行：systemctl restart networking

![image-20250511171425164](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511171425164.png)

#### 08-网络请求和下载

**ping命令**

可以通过 ping命令，检查指定的网络服务器是否是可联通状态

语法：ping [-c num] ip或主机名

​	选项：-c, 检查的次数，不使用，将无限检查

​	参数：IP 或 主机名，被检查的服务器的ip地址

**wget命令**

wget是非交互式的文件下载器，可以在命令行内下载网络文件

语法：wget [-b] url

​	选项：-b,后台下载，会将日志写入到当前工作目录的wget-log文件

​	参数：url, 下载链接

后台下载，通过tail命令可以监控后台下载进度：tail -f wget-log

**curl命令**

curl可以发送http网络请求，可用于：下载文件、获取信息等

语法：curl [-o] url

​	选项：-o, 用于下载文件，当url是下载链接时，可以使用此选项保存文件

​	参数：url，要发起请求的网络地址

示例：curl cip.cc

#### 09-端口

端口，是设备与外界通讯交流的出入口。端口可以分为:物理端口和虚拟端口两类

物理端口：又可称之为接口，是可见的端口，如USB接口，RJ45网口，HDMI端口等

虚拟端口：是指计算机内部的端口，是不可见的，是用来操作系统和外部进行交互使用的

Linux可以支持65535个端口，分为3类使用:

​	公认端口：1~1023，通常用于一些系统内置或知名程序的预留使用，如SSH服务的22端口，HTTPS服务的433端口，非特殊需要，不要占用

​	注册端口：1024~49151，通常可以随意使用，用于松散的绑定一些程序\服务

​	动态端口：49152~65535， 通常不会固定绑定程序，而是当程序对外进行网络链接时，用于临时使用

**查看端口占用**

使用nmap命令，安装nmap：yum -y install nmap

语法：nmap 被查看的IP地址

使用netstat命令，查看指定端口的占用情况

语法：netstat -anp|grep 端口号，安装netstat：yum -y install net-tools

#### 10-进程管理

进程是指程序在操作系统内运行后被注册为系统内的一个进程，并拥有独立的进程ID

进程ID

**查看进程**

可以通过ps命令查看Linux系统中的进程信息

语法：ps [-e -f]

​	选项：-e, 显示出全部的进程

​	选项：-f, 以完全格式化的形式展示信息

<img src="F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508071627937.png" alt="image-20250508071627937" style="zoom:100%;" />

​	UID：进程所属的用户id

​	PID：进程的进程号id

​	PPID：进程的父id

​	C：此进程的CPU占用率

​	STIME：进程的启动时间

​	TTY：启动此进程的终端程序号，如显示？，表示非终端启动

​	TIME：进程占用CPU的时间

​	CMD：进程对应的名称或启动路径或启动命令

**关闭进程**

在Linux中，可以通过kill命令关闭进程

语法：kill [-9] 进程ID

​	选项：-9，表示强制关闭进程。不适用，则是否关闭进程取决于自身处理机制

#### 11-主机状态监控

**查看系统资源占用**

top命令：查看cpu、内存适用情况

语法：top  按q或ctrl+c退出

![image-20250508200708808](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508200708808.png)

**top命令内容详解**

第一行：![image-20250508200727665](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508200727665.png)

​	top:命令名称，21:25:19 当前系统时间，up 11 days:启动了多长时间，3 users:3个用户登录，load average: 分别是1、5、15分钟时的负载

第二行：![image-20250508200835791](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508200835791.png)

​	Tasks:175个进程，1running:1个进程在运行，154 sleeping:154个进程睡眠，0 stopped:0个停止进程，0 zombie:0个僵尸进程

第三行：![image-20250508200853415](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508200853415.png)

​	Cpu(s):cpu适用率， us:用户cpu使用率，sy:系统cpu使用率，ni:高优先级进程占用cpu时间百分比，id:空闲cpu率，wa:IO等待CPU占用率，hi:CPU硬件中断率，si:CPU软件中断率，st:强制等待占用CPU率

第四、五行：![image-20250508200915026](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508200915026.png)

​	Mem:物理内存，total:总量，used:使用，free:空闲，buffers:buff占用

​	Swap:虚拟内存(交换空间)，total:总量，used:使用，free:空闲，cached:cache占用

![image-20250508202154335](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508202154335.png)

​	PID:进程id

​	USER:进程所属用户

​	PR:进程优先级，越小越高

​	NI:负值表示高优先级，正表示低优先级

​	VIRT:进程使用虚拟内存，单位KB

​	RES:进程使用物理内存，单位KB

​	SHR:进程使用共享内存，单位KB

​	S:进程状态（S休眠，R运行，Z僵尸死状态，N负数优先级，I空闲状态）

​	%CPU:进程占用CPU率

​	%MEM:进程占用内存率

​	TIME+:进程使用CPU时间总计，单位10毫秒

​	COMMAND:进程命令或名称或程序文件路径

**top命令选项**

| 选项 | 命令                                                         |
| ---- | ------------------------------------------------------------ |
| -p   | 只显示某个进程的信息                                         |
| -d   | 设置刷新时间                                                 |
| -c   | 显示产生进程的完整命令，默认时进程名                         |
| -n   | 指定刷新次数，比如 top -n 3, 刷新输出3次后退出               |
| -b   | 以非交互非全屏模式运行，以批次的方式执行top，一般配合-n指定输出几次统计信息，将输出重定向到指定文件，比如 top -b -n 3 > /tmp/top.tmp |
| -i   | 不显示任何闲置(idle) 或无用(zombie)的进程                    |
| -u   | 查找特定用户启动的进程                                       |

**top交互式选项**

| 按键 | 功能                                                         |
| ---- | ------------------------------------------------------------ |
| h键  | 会显示帮助画面                                               |
| c键  | 会显示产生进程的完整命令                                     |
| f键  | 可以选择需要展示的项目                                       |
| M键  | 根据驻留内存大小（RES）排序                                  |
| P键  | 根据CPU使用百分比大小进行排序                                |
| T键  | 根据时间/累计时间进行排序                                    |
| E键  | 切换顶部内存显示单位                                         |
| e键  | 切换进程内存显示单位                                         |
| l键  | 切换显示平均负载和启动时间信息                               |
| i键  | 不显示闲置或无用的进程，等同于-i参数，再次按下，变为默认显示 |
| t键  | 切换显示CPU状态信息                                          |
| m键  | 切换显示内存信息                                             |

**磁盘信息监控**

使用df命令，可以查看磁盘的使用情况

语法：df [-h]

​	选项：-h,以更加人性化的单位显示

![image-20250508204550923](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508204550923.png)

可以使用iostat查看CPU、磁盘的相关信息

语法：iostat [-x] [num1] [num2]

​	选项：-x,显示更多信息

​	num1：数字，刷新间隔，num2：数字，刷新几次

![image-20250508204822852](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508204822852.png)

​	tps: 该设备每秒的传输次数

**网络状态监控**

可以使用sar命令查看网络的相关统计(sar命令非常复杂，当前仅简单用于统计网络)

语法：sar -n DEV [num1] [num2]

​	选项：-n，查看网络，DEV表示查看网络接口

​	num1：刷新间隔， num2：查看次数

#### 12-环境变量

环境变量是操作系统在运行的时候，记录的一些关键性信息，用以辅助系统执行。

在Linux系统中执行：env命令即可查看当前系统中记录的环境变量

环境变量是一种KeyValue型结构

**环境变量：PATH**

![image-20250508210209969](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250508210209969.png)

PATH记录了系统执行任何命令的搜索路径

当执行任何命令，都会安装顺序，从上述路径中搜索要执行的程序的本体

**$符号**

在Linux系统中，$符号被用于取“变量”的值

比如：echo $PATH 就可以取得PATH这个环境变量的值，并通过echo语句输出出来

又或者：echo ${PATH}ABC 当和其它内容混合在一起的时候，可用通过{}来标注取的变量是谁

**自行设置环境变量**

临时设置，语法：export 变量名=变量值

永久生效：

​	针对当前用户生效，配置在当前用户的：~/.bashrc文件中

​		文件末尾添加：export 变量名=变量值

​	针对所有用户生效，配置在系统的：/etc/profile文件中 

​		文件末尾添加：export 变量名=变量值

​	并通过语法：source 配置文件，进行立刻生效，或重新登录生效

**自定义环境变量PATH**

临时修改PATH: export PATH=$PATH:追加自定义路径

或将export PATH=$PATH:追加自定义路径 添加到配置文件/etc/profile文件中 

#### 13-Linux文件的上传和下载

**上传、下载**

通过FinalShell工具，方便的和虚拟机进行数据交换

下载：浏览文件系统，找到合适的文件，右键点击下载，即可传输到本地电脑

上传：浏览文件系统，找到合适的目录，将本地电脑的文件拓展进入，即可方便的上传数据到Linux中

**rz、sz命令**

可通过rz、sz命令进行文件传输

rz、sz命令需要安装，可通过：yum -y install lrzsz 即可安装

rz命令，进行上传，语法：直接输入rz即可

sz命令，进行下载，语法：sz 要下载的文件

​		文件会自动下载到桌面的：fsdownload文件夹中

#### 14-压缩和解压

**压缩格式**

常见的压缩格式：

​	zip格式：Linux、Windows、MacOS，常用

​	7zip格式：Windows系统常用

​	rar格式：Windows系统常用

​	tar格式：Linux、MacOS常用

​	gzip格式：Linux、MacOS常用

**tar命令**

.tar, 称之为tarball，归档文件，即简单的将文件组装到一个.tar的文件内，并没有太多文件体积的减少，仅仅是简单的封装

.gz，也常见为.tar.gz，gzip格式压缩文件，即使用gzip压缩算法将文件压缩到一个文件内，可以极大的减少压缩后的体积

针对这两种格式，使用tar命令均可以进行压缩和解压缩的操作

语法：tar [-c -v -x -f -z -C] 参数1 参数2 ... 参数N

​	-c，创建压缩文件，用于压缩模式

​	-v，显示压缩、解压过程，用于查看进度

​	-x，解压模式

​	-f，要创建的文件，或要解压的文件，-f选项必须在所有选项中位置处于最后一个

​	-z，gzip模式，不使用-z就是普通的tarball格式

​	-C，选择解压的目的地，用于解压模式

**tar命令压缩**

常用的tar压缩组合有

举例1：tar -cvf test.tar 1.txt 2.txt 3.txt  将1.txt 2.txt 3.txt 压缩到test.tar文件内

举例2：tar -zcvf test.tar.gz 1.txt 2.txt 3.txt 将1.txt 2.txt 3.txt 压缩到test.tar.gz文件内，使用gzip模式

注意：

​	-z选项如果使用的话，一般处于选项位第一个

​	-f选项，必须在选项位最后一个

**tar 解压**

常用的tar解压组合有

举例1：tar -xvf test.tar  解压test.tar，将文件解压至当前目录

举例2：tar -xvf test.tar -C /home/xxx	解压test.tar，将文件解压至指定目录

举例3：tar -zxvf test.tar.gz -C /home/xxx	以Gzip模式解压test.tar.gz，将文件解压至指定目录

注意：

​	-f选项，必须在选项位最后一个

​	-z选项，建议在开头位置

​	-C选项单独使用，和解压所需的其它参数分开

**zip 命令压缩文件**

可以使用zip命令，压缩文件为zip压缩包

语法：zip [-r] 参数1 参数2 ... 参数N

​	-r, 被压缩的包含文件夹的时候，需要使用-r选项，和rm、cp等命令的-r效果一致

举例1：zip test.zip a.txt b.txt c.txt	将a.txt b.txt c.txt压缩到test.zip文件内

举例2：zip -r test.zip test  lmx a.txt	将test、lmx两个文件夹和a.txt文件压缩到text.zip文件内

**unzip 命令解压文件**

使用unzip命令，可以方便的解压zip压缩包

语法：unzip [-d] 参数

​	-d，指定要解压去的位置，同tar的-C选项

​	参数，被解压的zip压缩文件

举例1：unzip test.zip	将test.zip解压到当前目录

举例2：unzip test.zip -d /home/xxx	将test.zip解压到指定文件夹内

### 第五章

#### MySQL的安装

**MySQL5.7版本在CentOS系统安装**

1.配置yum仓库

原因：mysql不在centos的官方仓库中，通过rpm命令：

​	导入mysql仓库的密钥

​	配置mysql的yum仓库

-- 更新密钥

rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022

-- 安装Mysql yum库

rpm -Uvh http://repo.mysql.com/mysql57-community-release-el7-7.noarch.rpm

2.使用yum安装MySQL

-- yum安装mysql

yum -y install mysql-community-server

3.安装完成后，启动MySQL并配置开机启动

启动：systemctl start mysqld

开机自启：systemctl enable mysqld

4.检查Mysql的运行状态

命令：systemctl status mysqld

5.配置：主要配置管理用户root的密码以继配置允许远程登录的权限

​	(1).获取MySQL的初始密码

​	-- 通过grep命令，在/var/log/mysqld.log文件中，过滤temporary password关键字，得到初始密码

​	grep 'temporary password' /var/log/mysqld.log

​	(2).登录MySQL数据库系统

​	-- 执行：mysql -uroot -p

​		-u，登录的用户； -p，表示密码登录

​	(3).修改root用户密码

​	-- mysql控制台执行：alter user 'root'@'localhost' identified by 'Mysql@12356';

​	-- 密码要求：大于8位，有大写字母，有特殊符号，不能连续简单语句

​	(4).配置root的简单密码

​	-- 配置可以设置简单密码，需要降低mysql的密码安全级别

​	set global validate_password_policy=LOW;

​	set global validate_password_length=6;

​	alter user 'root'@'localhost' identified by '123456';

​	(5).配置root运行远程登录

​	-- 默认情况下，root用户是不运行远程登录的，只允许在MySQL所在的服务登录MySQL系统

​	-- 授权root远程登录

​	grant all privileges on *.* to root@"IP地址" identified by '密码' with grant option;

​		-- ip地址即允许登录的IP地址，也可以为%，表示允许任何地址

​		-- 密码表示给远程登录设置独立密码

​	-- 刷新权限，生效

​	flush privileges;

​	(6).检查端口

​	-- MySQL默认绑定了3306端口，可以通过端口占用检查MySQL的网络状态

​	netstat -anp | grep 3306

**MySQL8.0版本在CentOS系统安装**

1.配置yum仓库

原因：mysql不在centos的官方仓库中，通过rpm命令：

​	导入mysql仓库的密钥

​	配置mysql的yum仓库

-- 更新密钥

rpm --import https://repo.mysql.com/RPM-GPG-KEY-mysql-2022

-- 安装Mysql8.x版本 yum库

rpm -Uvh http://dev.mysql.com/get/mysql80-community-release-el7-2.noarch.rpm

2.使用yum安装MySQL

-- yum安装mysql

yum -y install mysql-community-server

3.安装完成后，启动MySQL并配置开机启动

启动：systemctl start mysqld

开机自启：systemctl enable mysqld

4.检查Mysql的运行状态

命令：systemctl status mysqld

5.配置：主要配置管理用户root的密码以继配置允许远程登录的权限

​	(1).获取MySQL的初始密码

​	-- 通过grep命令，在/var/log/mysqld.log文件中，过滤temporary password关键字，得到初始密码

​	grep 'temporary password' /var/log/mysqld.log

​	(2).登录MySQL数据库系统

​	-- 执行：mysql -uroot -p

​		-u，登录的用户； -p，表示密码登录

​	(3).修改root用户密码

​	-- mysql控制台执行：alter user 'root'@'localhost' identified by 'Mysql@12356';

​	-- 密码要求：大于8位，有大写字母，有特殊符号，不能连续简单语句

​	(4).配置root的简单密码

​	-- 配置可以设置简单密码，需要降低mysql的密码安全级别

​	set global validate_password.policy=LOW;

​	set global validate_password.length=6;

​	alter user 'root'@'localhost' identified by '123456';

​	(5).配置root运行远程登录

​	-- 默认情况下，root用户是不运行远程登录的，只允许在MySQL所在的服务登录MySQL系统

​	-- 第一次设置root远程登录，并配置远程密码使用

​	create user 'root'@'%' identified with mysql_native_password by '123456'

​	-- 后续修改密码使用如下命令

​	alter user 'root'@'%' identified with mysql_native_password by '123456'

**MySQL5.7版本在Ubuntu系统安装**

**安装操作需root权限**

1.通过sudo su - , 切换到root用户

2.或在每个命令前，加上sudo，用来临时提升权限

**安装**

1.下载apt仓库文件

-- 下载apt仓库的安装包，Ubuntu的安装包是.deb文件

wget https://dev.mysql.com/get/mysql-apt-config_0.8.12-1_all.deb

2.配置apt仓库

-- 使用dpkg命令安装仓库

dpkg -i mysql-apt-config_0.8.12-1_all.deb

选择5.7

3.配置apt仓库的信息

-- 首先导入仓库的密钥信息

apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 467B942D3A79BD29

-- 更新仓库信息

apt-get update

4.检查是否成功配置MySQL5.7的仓库

apt-cache policy mysql-server

<img src="F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511172334820.png" alt="image-20250511172334820" style="zoom:75%;" />

5.安装MySQL5.7

-- 使用apt安装mysql客户端和mysql服务端

apt install -f -y mysql-client=5.7* mysql-server=5.7*

6.启动MySQL

--启动

/etc/init.d/mysql start

--停止

/etc/init.d/mysql stop

--查看状态

/etc/init.d/mysql status

7.对MySQL进行初始化

-- 执行如下命令，此命令是MySQL安装后自带的配置程序

mysql_secure_installation

-- 可以通过which命令查看到这个自带程序所在的位置

which mysql_secure_installation

​	(1).输入密码

​	![image-20250511174316193](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511174316193.png)

​	(2).是否开启密码验证插件，如果需要增强密码安全性，输入y并回车，不需要直接回车

![image-20250511174343508](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511174343508.png)

​	(3).是否更改root密码，需要输入y回车，不需要直接回车

​	![image-20250511174413206](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511174413206.png)

​	(4).是否移除匿名用户，需要输入y回车，不需要直接回车

​	![image-20250511174442381](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511174442381.png)

​	(5).是否禁止root用户远程登录，需要输入y回车，不需要直接回车

​	![image-20250511174606453](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511174606453.png)

​	(6).是否移除自带的测试数据库，需要输入y回车，不需要直接回车

​	![image-20250511174703993](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511174703993.png)

​	(7).是否刷新权限，需要输入y回车，不需要直接回车

​	![image-20250511174715862](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250511174715862.png)

8.登录MySQL数据库

**MySQL8.0版本在Ubuntu系统安装**

1.如果已经按装过MySQL5.7版本，需要卸载仓库信息

-- 停止mysql服务

systemctl stop mysql

-- 卸载MySQL5.7版本

apt-get remove --purge mysql-server mysql-client mysql-common -y

apt remove -y mysql-client=5.7* mysql-server=5.7*

-- 卸载5.7的仓库信息

dpkg -l | grep mysql | awk '{print $2}' | xargs dpkg -P

-- 查看安装包信息

dpkg --get-selections | grep mysql

-- 自动删除未使用的依赖

apt-get autoremove -y

2.配置apt仓库

-- 使用dpkg命令安装仓库

dpkg -i mysql-apt-config_0.8.12-1_all.deb

选择8.0

2.更新apt仓库信息

apt update

3.安装MySQL8.0

sudo apt -f install mysql-server

#### Tomcat安装部署

Tomcat是由Apache开发的一个Servlet容器，实现了对Servlet和JSP的支持，并提供了作为Web服务器的一些特有 功能，如Tomcat管理和控制平台、安全域管理和Tomcat阀等。

**安装**

安装JDK环境:

1.登录Linux系统，切换到root用户

2.通过FinalShell，上传下载好的JDK安装包

3.创建文件夹，用来部署JDK，将JDK和Tomcat部署到：/export/server内

​	mkdir -p /export/server

4.解压缩JDK安装文件

​	tar -zxvf jdk-包 -C /export/server

5.配置JDK的软链接

​	ln -s /export/server/jdk-包 /export/server/jdk

6.配置JAVA_HOME环境变量，并添加到PATH环境变量中l

​	-- 编辑/etc/profile文件

​	export JAVA_HOME=/export/server/jdk

​	export PATH=$PATH:$JAVA_HOME/bin

​	-- 生效环境变量

​	source /etc/profile

**解压并安装Tomcat**

Tomcat建议使用非Root用户安装并启动

可以创建一个用户：tomcat用以部署

1.首先，放行tomcat需要使用的8080端口的外部访问权限

CentOS系统默认开启了防火墙，阻止外部网络流量访问系统内部

所以，如果想要Tomcat可以正常使用，需要Tomcat默认使用8080端口进行放行

放行有2种方式：

​	1.关闭防火墙

​	关闭防火墙——systemctl stop firewalld

​	停止防火墙开机自启——systemctl disable firewalld

​	2.配置防火墙规则，放行端口

​	-- 表示放行8080端口的tcp访问，--permanent表示永久生效

​	firewall-cmd --zone=public --add-port=8080/tcp --permanent

​	-- 重新载入防火墙规则使其生效

​	firewall-cmd --reload

​	-- 查看端口是否已放行

​	firewall-cmd --zone=public --list-ports

2.以root用户操作，创建tomcat用户

-- 使用root用户操作

useradd tomcat

-- 可选，为tomcat用户配置密码

passwd tomcat

3.下载Tomcat安装包

-- 使用root用户操作

wget https://adp-mirror-vm1-he-fi.apache.org/tomcat/tomcat-10/v10.0.27/bin/apache-tomcat-10.0.27.tar.gz

​	安装wget命令：yum -y install wget

-- 如果出现https相关错误，可以使用--no-check-certificate选项

wget --no-check-certificate https://adp-mirror-vm1-he-fi.apache.org/tomcat/tomcat-10/v10.0.27/bin/apache-tomcat-10.0.27.tar.gz

4.解压Tomcat安装包

tar -zxvf apache-tomcat-10.0.27.tar.gz -C /export/server

5.创建Tomcat软链接

ln -s /export/server/apache-tomcat-10.0.27 /export/server/tomcat

6.将tomcat文件夹权限给到tomcat

chown -R tomcat:tomcat /export/server/tomcat

chown -R tomcat:tomcat /export/server/apache-tomcat-10.0.27

7.切换到tomcat用户

su - tomcat

8.启动tomcat

/export/server/tomcat/bin/startup.sh

9.tomcat启动在8080端口，可以检查是否正常启动成功

netstat -anp | grep 8080

10.验证tomcat启动成功

curl IP:8080

![image-20250514215731631](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250514215731631.png)

#### Nginx安装部署

Nginx(engine x) 是一个高性能的HTTP和反向代理web服务器，同时也提供了IMAP/POP3/SMTP服务。

同Tomcat一样，Nginx可以托管用户编写的WEB应用程序成为可访问的网页服务，同时也可以作为流量代理服务器，控制流量的中转。

Nginx在WEB开发领域，基本上也是必备组件之一了。

**安装**

Nginx同样需要配置额外的yum仓库，才可以使用yum安装。

1.下载并添加 Nginx 仓库

sudo yum install -y epel-release
sudo yum install -y https://nginx.org/packages/mainline/centos/7/nginx-release-centos-7-0.el7.ngx.noarch.rpm

2.使用 `yum` 安装 Nginx：

sudo yum install -y nginx

3.启动 Nginx 并设置开机自启

-- 启动

sudo systemctl start nginx

--停止

sudo systemctl stop nginx

--运行状态

sudo systemctl status nginx

-- 重启服务

sudo systemctl restart nginx

--开机自启

sudo systemctl enable nginx

--关闭开机自启

sudo systemctl disable nginx

4.配置防火墙

-- 如果系统启用了防火墙，需要放行 Nginx 端口：

sudo firewall-cmd --zone=public --add-port=80/tcp --permanent
sudo firewall-cmd --reload

-- 验证80端口是否绑定成功

netstat -anp | grep 80

5.验证 Nginx 安装

-- 打开浏览器访问 Nginx 默认页面

在浏览器中输入 `http://localhost` 或者 `http://<你的服务器IP>`，你应该能看到 Nginx 的默认欢迎页面

<img src="F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250515204326289.png" alt="image-20250515204326289" style="zoom:50%;" />

6.配置 Nginx

-- Nginx 的主要配置文件位于 `/etc/nginx/nginx.conf`

sudo vi /etc/nginx/nginx.conf

-- 重启应用配置

sudo systemctl restart nginx

#### RabbitMQ安装部署

RabbitMQ是一款知名的开源消息队列系统，为企业提供消息的发布、订阅、点对点传输等消息服务。

RabbitMQ在企业开发中十分常见。

**1.安装 EPEL 仓库**

sudo yum install epel-release

**2.安装 RabbitMQ**

sudo yum install rabbitmq-server

**3.启动 RabbitMQ 服务**

sudo systemctl start rabbitmq-server

sudo systemctl enable rabbitmq-server

**4.放行防火墙配置**

-- 端口5672、25672

sudo firewall-cmd --zone=public --add-port=5672/tcp --permanent

sudo firewall-cmd --zone=public --add-port=15672/tcp --permanent

sudo firewall-cmd --zone=public --add-port=25672/tcp --permanent

sudo firewall-cmd --reload

**5.启动RabbitMQ的web管理控制台**

rabbitmq-plugins enable rabbitmq_management

**6.添加admin用户，并赋予权限**

默认的用户账号密码：guest/guest

-- 创建admin用户并设置密码

sudo rabbitmqctl add_user admin 'admin'

--赋予权限

```
sudo rabbitmqctl set_permissions -p "/" "admin" ".*"  ".*" ".*" 
```

-- 将新用户添加到管理员角色

sudo rabbitmqctl set_user_tags admin administrator

**7.验证登录 RabbitMQ**

RabbitMQ 提供了一个 Web 管理界面，可以通过浏览器访问 `http://localhost:15672/`。默认的用户名和密码是 `guest`/`guest`

![image-20250515213153552](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250515213153552.png)

#### Redis安装部署

redis是一个开源的、使用C语言编写的、支持网络交互的、可基于内存也可持久化Key-Value的数据库。

redis的特点就是：快，可以基于内存存储数据并提供超低延迟、超快的检索速度。

**1.配置EPEL仓库**

sudo yum install -y epel-release

**2.安装Redis**

sudo yum install -y redis

**3.启动Redis**

sudo systemctl start redis

**4.放行防火墙**

redis使用端口6379

sudo firewall-cmd --zone=public --add-port=6379/tcp --permanent

sudo firewall-cmd --reload

**5.进入redis服务**

-- 执行命令

redis-cli

**6.配置redis**

Redis 的配置文件位于 `/etc/redis.conf`

sudo vi /etc/redis.conf

-- 设置密码

requirepass yourpassword

#### ElasticSearch安装部署

全文搜索属于常见的需求，开源Elasticsearch是目前全文搜索引擎的首先。

它可以快速地存储、搜索和分析海量数据。

**1. 添加yum仓库**

-- 导入仓库密钥

sudo rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch

-- 添加yum源

vi  /etc/yum.repos.d/elasticsearch.repo

```
[elasticsearch-7.x]
name=Elasticsearch repository for 7.x packages
baseurl=https://artifacts.elastic.co/packages/7.x/yum
gpgcheck=1
gpgkey=https://artifacts.elatic.co/GPG-KEY-elasticsearch
enabled=1
autorefresh=1
type=rpm-md
```

-- 更新yum缓存

yum makecache

**2.下载安装Elasticsearch**

sudo yum install elasticsearch

**3.配置es**

```
vim /etc/elasticsearch/elasticsearch.yuml

# 17行，设置集群名称
cluster.name: my-cluster
# 23行，设置节点名称
node.name: node-1
# 56行，允许外网访问
network.host: 0.0.0.0
# 74行，配置集群master节点
cluster.initial_master_nodes: ["node-1"]
```

**4.启动es**

sudo systemctl start|stop|status|enable|disable elasticsearch

**5.放行防火墙**

redis使用端口6379

```
sudo firewall-cmd --permanent --add-port=9200/tcp
sudo firewall-cmd --permanent --add-port=9300/tcp
sudo firewall-cmd --reload
```

**6.验证测试**

浏览去打开：192.168.137.116:9200

<img src="F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250517103417744.png" alt="image-20250517103417744" style="zoom:50%;" />

#### 集群化环境前置准备

**配置多台Linux虚拟机**

1.使用VirtualBox复制功能复制虚拟机

2.修改主机名，修改固定ip

```
# 修改主机名
hostnamectl set-hostname node1

# 修改IP地址
vi /etc/sysconfig/network-scripts/ifcfg-xxx

# 重启网卡
systemctl restart network
```

**准备主机名映射**

1.在windows系统中修改hosts文件

C:\Windows\System32\drivers\etc\hosts

> 192.168.137.117 node1   # ping node1 验证是否有效
> 192.168.137.118 node2
> 192.168.137.119 node3

2.在Linux的/etc/hosts文件中，配置

> 192.168.137.117 node1   # ping node1 验证是否有效
> 192.168.137.118 node2
> 192.168.137.119 node3

**配置SSH免密登录**

 SSH服务是一种用于远程登录的安全认证协议。

 SSH服务支持：

 1.通过账户+密码的认证方式来做用户认证

 2.通过账户+密钥文件的方式来做用户认证

 远程登录命令：

 ssh root@node2 将以root用户登录node2服务器

 SSH免密配置：

 1.执行密钥生成(一路回车)：ssh-keygen -t rsa -b 4096

 2.公钥共享：

 ​	ssh-copy-id node1 # 将公钥复制到远程主机node1

 ​	ssh-copy-id node2

 	ssh-copy-id node3

 **配置JDK环境**

 **关闭防火墙和SELinux**

集群化软件间需要通过端口相互通讯，为避免通讯问题，可以简单在集群内部关闭防火墙

systemctl stop firewalld

systemctl disable firewalld

Linux有一个安全模块：SELinux，用以限制用户和程序的相关权限，来确保系统的安全稳定。

当前只需关闭SELinux功能，避免导致后面的软件运行出现问题。

vi /etc/sysconfig/selinux

SELINUX=enforcing 改为SELINUX=disabled

**克隆多台虚拟机**

修改主机名

更改固定IP

配置ssh免密

 **添加快照**



 **SCP命令**

 scp命令是cp命令的升级版，即：ssh cp，通过SSH协议完成文件的复制。

 其主要功能就是：在不同Linux服务器之间，通过SSH协议互相传输文件。

 只要知晓服务器的账户和密码（或密钥），即可通过SCP互传文件。

 语法：

 ```
 scp [-r] 参数1 参数2
 - -r选项用于复制文件夹使用，如果复制文件夹，必须使用-r
 - 参数1：本机路径 或 远程目标路径
 - 参数2：远程路径 或 本机路径
 
 如：
 scp -r /export/server/jdk root@node2:/export/server/
 将本机上的文件夹，以root的身份复制到node2的/export/server/内
 同SSH登录一样，账户名可以省略（使用本机当前的同名账户登录）
 
 如：
 scp -r node2:/export/server/jdk /export/server/
 将远程node2的jdk文件夹，复制到本机的/export/server/内
 
 # scp命令的高级用法
 cd /export/server
 # 将本机当前路径的jdk文件，复制到node2服务器的同名路径下，`命令`表示执行命令
 scp -r jdk node2:`pwd`/ 
 # 将本机当前路径的jdk文件夹，复制到node2服务器的同名路径下
 scp -r jdk node2:$PWD
 ```

#### Zookeeper安装部署

zooKeeper是一个分布式的，开发源码的分布式应用程序协调服务，是Hadoop和Hbase的重要组件。它是一个为分布式应用提供一致性服务的软件，提供的功能包括：配置维护、域名服务、分布式同步、组服务等。

除了为Hadoop和HBase提供协调服务外，Zookeeper也被其它许多软件采用作为其分布式状态一致性的依赖，又或者一些软件项目中，也经常见到Zookeeper作为一致性 协调服务存在。

Zookeeper不论是大数据领域亦或是其它服务器开发领域，涉及到分布式状态一致性的场景，总有它的身影存在。

**安装**

Zookeeper是一款分布式的集群软件，可以在多台服务器上部署，并协同组成分布式集群一起工作。

1.首先，要确定已经完成了集群环境前置准备环节的全部内容

2.【node1上操作】下载Zookeeper安装包，并解压

```
# 下载
wget http://archive.apache.org/dist/zookeeper/zookeeper-3.5.9/apache-zookeeper-3.5.9-bin.tar.gz

# 确保如下目录存在，不存在就创建
mkdir -p /export/server

# 解压
tar -zxvf apache-zookeeper-3.5.9-bin.tar.gz -C /export/server
```

3.【node1上操作】创建软链接

ln -s /export/server/apache-zookeeper-3.5.9 /export/server/zookeeper

4.【node1上操作】修改配置文件

```
vi /export/server/zookeeper/conf/zoo_sample.cfg

tickTime=2000
# zookeeper数据存储目录
dataDir=/export/server/zookeeper/data
clientPort=2181
initLimit=5
syncLimit=2
server.1=node1:2888:3888
```

5.【node1上操作】配置myid

```
# 1.创建Zookeeper的数据目录
mkdir /export/server/zookeeper/data

# 2.创建文件，并填入1
vi /export/server/zookeeper/data/myid
# 在文件内填入1即可
```

6.【node2和node3上操作】创建文件夹

```
mkdir -p /export/server
```

7.【node1上操作】将Zookeeper 复制到node2和node3

```
cd /export/server
scp -r apache-zookeeper-3.5.9-bin/ node2:`pwd`/
scp -r apache-zookeeper-3.5.9-bin/ node3:`pwd`/
```

8.【node2上操作】

```
# 1.创建软链接
ln -s /export/server/apache-zookeeper-3.5.9 /export/server/zookeeper

# 2.修改myid文件
vi /export/server/zookeeper/data/myid
# 在文件内填入2即可
```

9.【node3上操作】

```
# 1.创建软链接
ln -s /export/server/apache-zookeeper-3.5.9 /export/server/zookeeper

# 2.修改myid文件
vi /export/server/zookeeper/data/myid
# 在文件内填入3即可
```

10.【在node1、node2、node3上分别执行】启动zookeeper

```
#启动命令
/export/server/zookeeper/bin/zkServer.sh start
```

11.【在node1、node2、node3上分别执行】检查Zookeeper进程是否启动

```
jps
# 结果中找到有：QuorumPeerMain 进程即可
```

12.【node1上操作】验证Zookeepr

```
/export/server/zookeeper/bin/zkCli.sh

# 进入到Zookeeper控制台中后，执行
ls /
# 如无报错即配置成功
```

#### Kafka集群安装部署

kafka是一款分布式的、去中心化的、高吞吐低延迟、订阅模式的消息队列系统。

同RabbitMQ一样，Kafka也是消息队列。不过RabbitMQ多用于后端系统，因其更加专注于消息的延迟和容错。

Kafka多用于大数据体系，因其更加专注于数据的吞吐能力。

Kafka多数都是运行在分布式(集群化)模式下，所以课程将以3台服务器，来完成Kafka集群的安装部署。

**安装**

1.确保已经安装部署了JDK和Zookeeper服务

2.【node1上操作】下载并上传Kafka的安装包

```
# 下载安装包
wget http://archive.apache.org/dist/kafka/2.4.1/kafka_2.12-2.4.1.tgz
```

3.【node1上操作】解压

```
mkdir -p /export/server

# 解压
tar -zxvf kafka_2.12-2.4.1.tgz -C /export/server/

# 创建软链接
ln -s /export/server/kafka_2.12-2.4.1 /export/server/kafka
```

4.【node1上操作】修改Kafka目录内的config中server.properties文件

```
cd /export/server/kafka/config
vi server.properties

# 指定broker的id
broker.id=1
# 指定kafka的绑定监听的地址
listeners=PLAINTEXT://node1:9092
# 指定Kafka数据的位置
log.dir=/export/server/kafka/data
# 指定Zookeeper的三个节点
zookeeper.connect=node1:2181,node2:2181,node3:2181
```

5.【node1上操作】将node1的kafka复制到node2和node3

```
cd /export/server

# 复制到node2同名文件夹
scp -r kafka_2.12-2.4.1 node2:`pwd`/

# 复制到node3同名文件夹
scp -r kafka_2.12-2.4.1 node3:`pwd`/
```

6.【node2上操作】

```
# 创建软链接
ln -s /export/server/kafka_2.12-2.4.1 /export/server/kafka

cd /export/server/kafka/config
# 指定broker的id
broker.id=2
# 指定kafka的绑定监听的地址
listeners=PLANTEXT:/node2:9092
# 指定Kafka数据的位置
log.dir=/export/server/kafka/data
# 指定Zookeeper的三个节点
zookeeper.connect=node1:2181,node2:2181,node3:2181
```

7.【node3上操作】

```
# 创建软链接
ln -s /export/server/kafka_2.12-2.4.1 /export/server/kafka

cd /export/server/kafka/config
# 指定broker的id
broker.id=3
# 指定kafka的绑定监听的地址
listeners=PLANTEXT:/node3:9092
# 指定Kafka数据的位置
log.dir=/export/server/kafka/data
# 指定Zookeeper的三个节点
zookeeper.connect=node1:2181,node2:2181,node3:2181
```

8.启动kafka

```
# 请确保Zookeeper已经启动了

# 方式1：【前台启动】分别在node1、2、3上执行如下语句
/export/server/kafka/bin/kafka-server-start.sh /export/server/kafka/config/server.properties

# 方式2：【后台启动】分别在node1、2、3上执行如下语句
nohup /export/server/kafka/bin/kafka-server-start.sh /export/server/kafka/config/server.properties 2>&1 >> /export/server/kafka/kafka-server.log &
```

9.验证kafka启动

```
# 在每台服务器执行
jps
# 结果中有kafka即成功
```

![image-20250521221318607](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250521221318607.png)

**测试Kafka能否正常使用**

1.创建测试主题

```
# 在node1执行，创建一个主题
/export/server/kafka/bin/kafka-topics.sh --create --zookeeper node1:2181 --replication-factor 1 --partitions 3 --topic test
```

2.运行测试，请在FinalShell中打开2个node1的终端页面

```
# 打开一个终端页面，启动一个模拟的数据生产者
/export/server/kafka/bin/kafka-console-producer.sh --broker-list node1:9092 --topic test
# 再打开一个新的终端页面，在启动一个模拟的数据消费者
/export/server/kafka/bin/kafka-console-consumer.sh --bootstrap-server node1:9092 --topic test --from-beginning
```

![l](F:\LearnDoc\1-架构师-20250406\3-操作系统\Linux.assets\image-20250521222322200.png)
